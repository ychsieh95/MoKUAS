@page "{SysValue?}"
@model MissClassesModel
@{
    Layout = "_LayoutStudents";
    ViewData["Title"] = "學期缺曠";
}

@section scripts {
    <script type="text/javascript">
        $('#SysValue').change(function () {
            $(this).prop('disabled', true);
            window.location = '/Student/MissClasses/' + $(this).val();
            //$('#search-form').submit();
        });
    </script>
}

<div class="container">
    <div asp-validation-summary="All" class="my-3"></div>
    <form asp-action="/Student/MissClasses" method="get" class="my-3" id="search-form">
        <div class="form-group row">
            <label class="col-sm-2 col-form-label text-sm-right">選擇查詢缺曠學期：</label>
            <div class="col-sm-10">
                <select asp-for="SysValue" asp-items="@Model.DropDownList" class="form-control" required></select>
            </div>
        </div>
    </form>

    <hr />

    <div class="d-none d-sm-block">
        <table class="table table-bordered">
            <thead class="w-100">
                <tr class="table-info text-center">
                    <th class="align-middle">#</th>
                    <th>假單編號</th>
                    <th>日期</th>
                    <th>朝會</th>
                    <th>早讀</th>
                    <th class="align-middle">1</th>
                    <th class="align-middle">2</th>
                    <th class="align-middle">3</th>
                    <th class="align-middle">4</th>
                    <th class="align-middle">A</th>
                    <th class="align-middle">5</th>
                    <th class="align-middle">6</th>
                    <th class="align-middle">7</th>
                    <th class="align-middle">8</th>
                    <th class="align-middle">B</th>
                    <th class="align-middle">11</th>
                    <th class="align-middle">12</th>
                    <th class="align-middle">13</th>
                    <th class="align-middle">14</th>
                </tr>
            </thead>
            <tbody class="w-100">
                @foreach (var missClass in Model.MissClasses)
                {
                    <tr class="text-center">
                        <td class="align-middle">@missClass.Index</td>
                        <td class="align-middle">@missClass.AbsenceFormId</td>
                        <td class="align-middle">@missClass.Date</td>
                        <td class="align-middle">@missClass.MorningMeeting</td>
                        <td class="align-middle">@missClass.MorningSelfStudy</td>
                        <td class="align-middle">@missClass._1</td>
                        <td class="align-middle">@missClass._2</td>
                        <td class="align-middle">@missClass._3</td>
                        <td class="align-middle">@missClass._4</td>
                        <td class="align-middle">@missClass._A</td>
                        <td class="align-middle">@missClass._5</td>
                        <td class="align-middle">@missClass._6</td>
                        <td class="align-middle">@missClass._7</td>
                        <td class="align-middle">@missClass._8</td>
                        <td class="align-middle">@missClass._B</td>
                        <td class="align-middle">@missClass._11</td>
                        <td class="align-middle">@missClass._12</td>
                        <td class="align-middle">@missClass._13</td>
                        <td class="align-middle">@missClass._14</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    @foreach (var missClass in Model.MissClasses)
    {
        <div class="card d-sm-none my-2">
            <h5 class="card-header" style="background-color: #bee5eb;">#@missClass.Index - @missClass.AbsenceFormId (@missClass.Date)</h5>
            <div class="card-body p-0">
                <table class="table table-bordered">
                    <tbody class="w-100">
                        <tr class="text-center">
                            <td class="table-success align-middle">朝會</td>
                            <td class="align-middle" colspan="4">@missClass.MorningMeeting</td>
                        </tr>
                        <tr class="table-success text-center">
                            <td class="align-middle">M</td>
                            <td class="align-middle">1</td>
                            <td class="align-middle">2</td>
                            <td class="align-middle">3</td>
                            <td class="align-middle">4</td>
                        </tr>
                        <tr class="text-center">
                            <td class="align-middle">@missClass.MorningSelfStudy</td>
                            <td class="align-middle">@missClass._1</td>
                            <td class="align-middle">@missClass._2</td>
                            <td class="align-middle">@missClass._3</td>
                            <td class="align-middle">@missClass._4</td>
                        </tr>
                        <tr class="table-success text-center">
                            <td class="align-middle">A</td>
                            <td class="align-middle">5</td>
                            <td class="align-middle">6</td>
                            <td class="align-middle">7</td>
                            <td class="align-middle">8</td>
                        </tr>
                        <tr class="text-center">
                            <td class="align-middle">@missClass._A</td>
                            <td class="align-middle">@missClass._5</td>
                            <td class="align-middle">@missClass._6</td>
                            <td class="align-middle">@missClass._7</td>
                            <td class="align-middle">@missClass._8</td>
                        </tr>
                        <tr class="table-success text-center">
                            <td class="align-middle">B</td>
                            <td class="align-middle">11</td>
                            <td class="align-middle">12</td>
                            <td class="align-middle">13</td>
                            <td class="align-middle">14</td>
                        </tr>
                        <tr class="text-center">
                            <td class="align-middle">@missClass._B</td>
                            <td class="align-middle">@missClass._11</td>
                            <td class="align-middle">@missClass._12</td>
                            <td class="align-middle">@missClass._13</td>
                            <td class="align-middle">@missClass._14</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>